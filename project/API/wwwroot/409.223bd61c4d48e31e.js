"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[409],{4409:(F,T,l)=>{l.r(T),l.d(T,{AccountModule:()=>Y});var n=l(6895),d=l(4466),m=l(1490),i=l(433),t=l(4650),b=l(740),x=l(4015);let C=(()=>{class o{constructor(s,r,e){this.accountService=s,this.router=r,this.activatedRoute=e,this.loginForm=new i.cw({email:new i.NI("",[i.kI.required,i.kI.email]),password:new i.NI("",i.kI.required)}),this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl)})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(b.B),t.Y36(m.F0),t.Y36(m.gz))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-dark","mt-3",3,"disabled"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Login"),t.qZA()(),t._UZ(6,"app-text-input",5)(7,"app-text-input",6),t.TgZ(8,"div",7)(9,"button",8),t._uU(10," Sign in "),t.qZA()()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",e.loginForm),t.xp6(4),t.Q6J("formControl",e.loginForm.controls.email)("label","Email Address"),t.xp6(1),t.Q6J("formControl",e.loginForm.controls.password)("label","Password")("type","password"),t.xp6(2),t.Q6J("disabled",e.loginForm.invalid))},dependencies:[x.t,i._Y,i.JJ,i.JL,i.oH,i.sg]})}return o})();var y=l(4986),I=l(4482),a=l(5403),c=l(5698),f=l(3900),u=l(4004),U=l(8746);function S(o,g){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const s=g.$implicit;t.xp6(1),t.hij(" ",s," ")}}function E(o,g){if(1&o&&(t.TgZ(0,"ul",10),t.YNc(1,S,2,1,"li",11),t.qZA()),2&o){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.errors)}}const N=[{path:"login",component:C},{path:"register",component:(()=>{class o{constructor(s,r,e){this.fb=s,this.accountService=r,this.router=e,this.errors=null,this.registerForm=this.fb.group({displayName:["",i.kI.required],email:["",[i.kI.required,i.kI.email],[this.validateEmailNotTaken()]],password:["",[i.kI.required,i.kI.pattern("(?=^.{6,10}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*\\s).*$")]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>this.router.navigateByUrl("/shop"),error:s=>this.errors=s.errors})}validateEmailNotTaken(){return s=>s.valueChanges.pipe(function p(o,g=y.z){return(0,I.e)((s,r)=>{let e=null,v=null,Z=null;const J=()=>{if(e){e.unsubscribe(),e=null;const h=v;v=null,r.next(h)}};function O(){const h=Z+o,A=g.now();if(A<h)return e=this.schedule(void 0,h-A),void r.add(e);J()}s.subscribe((0,a.x)(r,h=>{v=h,Z=g.now(),e||(e=g.schedule(O,o),r.add(e))},()=>{J(),r.complete()},void 0,()=>{v=e=null}))})}(1e3),(0,c.q)(1),(0,f.w)(()=>this.accountService.checkEmailExists(s.value).pipe((0,u.U)(r=>r?{emailExists:!0}:null),(0,U.x)(()=>s.markAsTouched()))))}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(i.qu),t.Y36(b.B),t.Y36(m.F0))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-register"]],decls:13,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],["class","text-danger list-unstyled",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return e.onSubmit()}),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Sign up"),t.qZA()(),t._UZ(6,"app-text-input",5)(7,"app-text-input",5)(8,"app-text-input",6),t.YNc(9,E,2,1,"ul",7),t.TgZ(10,"div",8)(11,"button",9),t._uU(12," Sign up "),t.qZA()()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",e.registerForm),t.xp6(4),t.Q6J("formControl",e.registerForm.controls.displayName)("label","Display Name"),t.xp6(1),t.Q6J("formControl",e.registerForm.controls.email)("label","Email Address"),t.xp6(1),t.Q6J("formControl",e.registerForm.controls.password)("label","Password")("type","password"),t.xp6(1),t.Q6J("ngIf",e.errors),t.xp6(2),t.Q6J("disabled",e.registerForm.invalid))},dependencies:[n.sg,n.O5,x.t,i._Y,i.JJ,i.JL,i.oH,i.sg]})}return o})()}];let Q=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#n=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(N),m.Bz]})}return o})(),Y=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#n=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[n.ez,Q,d.m]})}return o})()},4015:(F,T,l)=>{l.d(T,{t:()=>I});var n=l(4650),d=l(433),m=l(6895);function i(a,p){1&a&&n._UZ(0,"div",5)}function t(a,p){if(1&a&&(n.TgZ(0,"div",6),n._uU(1),n.qZA()),2&a){const c=n.oxw();n.xp6(1),n.hij(" Please enter your ",c.label," ")}}function b(a,p){1&a&&(n.TgZ(0,"div",6),n._uU(1," Invalid email address "),n.qZA())}function x(a,p){1&a&&(n.TgZ(0,"div",6),n._uU(1," Password not complex enough "),n.qZA())}function C(a,p){1&a&&(n.TgZ(0,"div",6),n._uU(1," Email address is taken "),n.qZA())}function y(a,p){if(1&a&&(n.TgZ(0,"div",6),n._uU(1),n.qZA()),2&a){const c=n.oxw();n.xp6(1),n.AsE(" ",c.label," should be equal or greater than ",null==c.control.errors||null==c.control.errors.min?null:c.control.errors.min.min," ")}}let I=(()=>{class a{constructor(c){this.controlDir=c,this.type="text",this.label="",this.controlDir.valueAccessor=this}writeValue(c){}registerOnChange(c){}registerOnTouched(c){}get control(){return this.controlDir.control}static#t=this.\u0275fac=function(f){return new(f||a)(n.Y36(d.a5,2))};static#n=this.\u0275cmp=n.Xpm({type:a,selectors:[["app-text-input"]],inputs:{type:"type",label:"label"},decls:10,vars:11,consts:[[1,"form-floating","mb-3"],[1,"form-control",3,"type","formControl","placeholder","ngClass"],["class","fa fa-spinner fa-spin loader",4,"ngIf"],["for","floatingInput"],["class","invalid-feedback",4,"ngIf"],[1,"fa","fa-spinner","fa-spin","loader"],[1,"invalid-feedback"]],template:function(f,u){1&f&&(n.TgZ(0,"div",0),n._UZ(1,"input",1),n.YNc(2,i,1,0,"div",2),n.TgZ(3,"label",3),n._uU(4),n.qZA(),n.YNc(5,t,2,1,"div",4),n.YNc(6,b,2,0,"div",4),n.YNc(7,x,2,0,"div",4),n.YNc(8,C,2,0,"div",4),n.YNc(9,y,2,2,"div",4),n.qZA()),2&f&&(n.xp6(1),n.s9C("type",u.type),n.s9C("placeholder",u.label),n.Q6J("formControl",u.control)("ngClass",u.control.touched?u.control.invalid?"is-invalid":"is-valid":null),n.xp6(1),n.Q6J("ngIf","PENDING"===u.control.status),n.xp6(2),n.Oqu(u.label),n.xp6(1),n.Q6J("ngIf",null==u.control.errors?null:u.control.errors.required),n.xp6(1),n.Q6J("ngIf",null==u.control.errors?null:u.control.errors.email),n.xp6(1),n.Q6J("ngIf",null==u.control.errors?null:u.control.errors.pattern),n.xp6(1),n.Q6J("ngIf",null==u.control.errors?null:u.control.errors.emailExists),n.xp6(1),n.Q6J("ngIf",null==u.control.errors?null:u.control.errors.min))},dependencies:[m.mk,m.O5,d.Fj,d.JJ,d.oH],styles:[".loader[_ngcontent-%COMP%]{position:absolute;width:auto;top:20px;right:40px;margin-top:0}.form-control[_ngcontent-%COMP%]:focus{border-color:#772953;box-shadow:0 0 0 .1rem #772953}"]})}return a})()}}]);